# ğŸ“… Booking System - Complete Guide

## ğŸ‰ New Feature: Property Booking System!

Users can now book properties, and bookings automatically expire after 7 days!

---

## âœ¨ Features

### For Users:
- âœ… Book available properties
- âœ… View all their bookings
- âœ… See booking expiry dates
- âœ… Cancel bookings
- âœ… See which properties they've booked
- âœ… Separate tabs for browsing and bookings
- âœ… Visual indicators (green badges for booked properties)

### For Admins:
- âœ… View all bookings from all users
- âœ… See active bookings
- âœ… See expired bookings
- âœ… View user details for each booking
- âœ… See booking dates and expiry dates
- âœ… Beautiful table layout with property images

### Automatic Features:
- âœ… Bookings expire after 7 days automatically
- âœ… Expired bookings are marked as "expired"
- âœ… Properties become available again after expiry
- âœ… Real-time status updates

---

## ğŸ¯ How It Works

### Booking Flow:

```
1. User browses properties
   â†“
2. User clicks "Book Property"
   â†“
3. Confirmation dialog appears
   â†“
4. Booking created with 7-day expiry
   â†“
5. Property marked as "Booked by You"
   â†“
6. Admin can see booking in dashboard
   â†“
7. After 7 days: Booking expires automatically
   â†“
8. Property becomes available again
```

---

## ğŸ“– User Guide

### How to Book a Property:

1. **Login** as a user
2. Go to **User Dashboard**
3. Click **"Browse Properties"** tab
4. Find a property you like
5. Click **"ğŸ“… Book Property"** button
6. Confirm the booking
7. Done! Property is booked for 7 days

### View Your Bookings:

1. Go to **User Dashboard**
2. Click **"âœ… My Bookings"** tab
3. See all your bookings:
   - **Active Bookings** (green border)
   - **Expired Bookings** (grayed out)

### Cancel a Booking:

1. Go to **"My Bookings"** tab
2. Find the booking
3. Click **"âŒ Cancel Booking"**
4. Confirm cancellation
5. Property becomes available again

---

## ğŸ‘¨â€ğŸ’¼ Admin Guide

### View All Bookings:

1. **Login** as admin
2. Go to **Admin Dashboard**
3. Click **"ğŸ“… Bookings"** tab
4. See all bookings from all users

### Booking Information Shown:

- Property image and details
- User name and email
- Booking date
- Expiry date and time
- Status (Active/Expired)

### Active vs Expired:

**Active Bookings:**
- Green background
- âœ… Active badge
- Full color images
- Shows expiry countdown

**Expired Bookings:**
- Gray background
- â° Expired badge
- Grayscale images
- Shows expiry date

---

## ğŸ¨ Visual Indicators

### In Browse Properties:

**Available Property:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Property Image]   â”‚
â”‚  $450,000          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Luxury Apartment   â”‚
â”‚  ğŸ“ New York, NY    â”‚
â”‚  ğŸ›ï¸ 3  ğŸš¿ 2  ğŸ“ 1500â”‚
â”‚  [ğŸ“… Book Property] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Booked Property:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Property Image]   â”‚
â”‚  âœ… Booked by You   â”‚
â”‚  $450,000          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Luxury Apartment   â”‚
â”‚  ğŸ“ New York, NY    â”‚
â”‚  ğŸ›ï¸ 3  ğŸš¿ 2  ğŸ“ 1500â”‚
â”‚  [âœ… Already Booked]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### In My Bookings:

**Active Booking:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Property Image]           â”‚
â”‚  Luxury Apartment    [Active]â”‚
â”‚  ğŸ“ New York, NY            â”‚
â”‚  $450,000                   â”‚
â”‚  â° Expires: Feb 14, 2026   â”‚
â”‚  Booked on: Feb 7, 2026     â”‚
â”‚  [âŒ Cancel Booking]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Expired Booking:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Grayscale Image]          â”‚
â”‚  Luxury Apartment   [Expired]â”‚
â”‚  ğŸ“ New York, NY            â”‚
â”‚  Expired on: Feb 14, 2026   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Dashboard Stats

### User Dashboard:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Available Properties: 10               â”‚
â”‚  My Bookings: 2                         â”‚
â”‚  Filtered Results: 10                   â”‚
â”‚  Expired: 1                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin Dashboard:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Total Properties: 10                   â”‚
â”‚  Total Users: 15                        â”‚
â”‚  Admins: 2                              â”‚
â”‚                                         â”‚
â”‚  Tabs: [Properties] [Users] [Bookings(3)]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Technical Details

### Database Table:

```sql
bookings
â”œâ”€â”€ id (Primary Key)
â”œâ”€â”€ property_id (Foreign Key â†’ properties)
â”œâ”€â”€ user_id (Foreign Key â†’ users)
â”œâ”€â”€ status (pending/confirmed/expired)
â”œâ”€â”€ booking_date (Timestamp)
â”œâ”€â”€ expiry_date (DateTime)
â””â”€â”€ created_at (Timestamp)
```

### API Endpoints:

**Get Bookings:**
```
GET /api/bookings.php
GET /api/bookings.php?user_id=1
```

**Create Booking:**
```
POST /api/bookings.php
Body: {
  property_id: 1,
  user_id: 1
}
```

**Cancel Booking:**
```
DELETE /api/bookings.php?id=1
```

### Auto-Expiry:

Every API call automatically runs:
```sql
UPDATE bookings 
SET status = 'expired' 
WHERE expiry_date < NOW() 
AND status = 'pending'
```

---

## ğŸ¯ Use Cases

### Use Case 1: User Books Property

**Scenario:** John wants to book an apartment

**Steps:**
1. John logs in
2. Browses properties
3. Finds "Luxury Apartment"
4. Clicks "Book Property"
5. Confirms booking
6. Property reserved for 7 days

**Result:**
- John sees "âœ… Booked by You" badge
- Admin sees booking in dashboard
- Other users see property as available (can't book)

### Use Case 2: Booking Expires

**Scenario:** 7 days pass since booking

**What Happens:**
1. System automatically marks booking as "expired"
2. Property becomes available again
3. John sees booking in "Expired" section
4. Admin sees booking moved to "Expired Bookings"

### Use Case 3: User Cancels Booking

**Scenario:** John changes his mind

**Steps:**
1. John goes to "My Bookings"
2. Finds the booking
3. Clicks "Cancel Booking"
4. Confirms cancellation

**Result:**
- Booking deleted from database
- Property available immediately
- John can book again if wanted

---

## ğŸš€ Testing Guide

### Test Scenario 1: Book a Property

1. Login as user: `user@realestate.com / user123`
2. Go to User Dashboard
3. Click "Browse Properties"
4. Click "Book Property" on any property
5. Confirm booking
6. Check "My Bookings" tab
7. Verify booking appears

### Test Scenario 2: View as Admin

1. Login as admin: `admin@realestate.com / admin123`
2. Go to Admin Dashboard
3. Click "Bookings" tab
4. Verify you see the booking
5. Check user details are shown
6. Verify expiry date is 7 days from now

### Test Scenario 3: Cancel Booking

1. As user, go to "My Bookings"
2. Click "Cancel Booking"
3. Confirm cancellation
4. Verify booking disappears
5. Go to "Browse Properties"
6. Verify property shows "Book Property" again

### Test Scenario 4: Multiple Bookings

1. Book multiple properties
2. Check "My Bookings" shows all
3. Check stats card shows correct count
4. Verify each has different expiry dates

---

## ğŸ’¡ Pro Tips

### Tip 1: Booking Limits
- Users can book multiple properties
- Each property can only be booked by one user at a time
- Trying to book an already-booked property shows error

### Tip 2: Expiry Tracking
- Expiry date shown in booking details
- Countdown visible in user dashboard
- Admin can see all expiry dates

### Tip 3: Status Indicators
- Green = Active booking
- Gray = Expired booking
- Badge shows status clearly

### Tip 4: Admin Monitoring
- Admin sees all bookings in one place
- Can track which properties are popular
- Can see user booking patterns

---

## ğŸ¨ Color Coding

```
Active Bookings:
- Border: Green (#10B981)
- Badge: Green background
- Status: âœ… Active

Expired Bookings:
- Border: Gray (#9CA3AF)
- Badge: Gray background
- Status: â° Expired
- Image: Grayscale filter

Booked Properties:
- Badge: Green (#10B981)
- Text: "âœ… Booked by You"
- Button: Disabled (green)
```

---

## ğŸ“± Responsive Design

All booking features work on:
- âœ… Desktop
- âœ… Tablet
- âœ… Mobile

Tables scroll horizontally on mobile for better UX.

---

## ğŸ”’ Security

- âœ… Users can only see their own bookings
- âœ… Users can only cancel their own bookings
- âœ… Admin can see all bookings (read-only)
- âœ… Property ownership verified before booking
- âœ… Duplicate booking prevention

---

## ğŸ“ˆ Statistics

### Booking Metrics:

**User Dashboard:**
- Total available properties
- User's active bookings
- User's expired bookings
- Filtered results count

**Admin Dashboard:**
- Total bookings (all users)
- Active bookings count
- Expired bookings count
- Per-property booking history

---

## ğŸ‰ Summary

**What You Can Do:**

âœ… Book properties (users)
âœ… View bookings (users & admin)
âœ… Cancel bookings (users)
âœ… Track expiry dates
âœ… See booking history
âœ… Monitor all bookings (admin)
âœ… Automatic expiry after 7 days

**Key Features:**

- 7-day booking period
- Automatic expiration
- Visual indicators
- Real-time updates
- User-friendly interface
- Admin monitoring
- Mobile responsive

---

## ğŸš€ Quick Start

**For Users:**
1. Login
2. Browse Properties
3. Click "Book Property"
4. Done!

**For Admins:**
1. Login
2. Click "Bookings" tab
3. See all bookings!

---

**ğŸŠ Enjoy the new booking system!** ğŸ“…âœ¨
